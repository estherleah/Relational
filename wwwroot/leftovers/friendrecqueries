/*FRIENDS OF FRIENDS
* make sure they're not already a current friend
* Randomise and limit the output (if specified)
*/
//Exclude yourself (you can't be friends with yourself)??
  //this currently (mostly) works but it shows pending friends in your recs... if your friends are friends with htem
//THIS IS THE NEW AND UPDATED FRIENDS OF FRIENDS QUERY FIXED 14 MAR
$recommendQuery1 = " SELECT firstName, lastName, profilephotoURL, gender,
                            location, userID
                            FROM user
                            WHERE userID IN
                              (SELECT DISTINCT userID2
                              FROM friendship AS fo
                              WHERE userID1 IN
                                (SELECT userID2
                                  FROM friendship
                                  WHERE userID1 = '$userIDEscaped'
                                )
                                AND status = 1
                                AND fo.userID2 NOT IN
                             	(SELECT userID2
                                 FROM friendship
                                 WHERE userID1 = '$userIDEscaped')
                               	AND userID2 = '$userIDEscaped'

                            )
                            AND userID != '$userIDEscaped'

                          ";
/*
CIRCLERECS-----SHOULD BE FIXED NOW 12 MAR
 find circle participants that user is not friends with of circles user is in
* make sure they're not already a current friend
* Randomise and limit the output (if specified) */


$recommendQuery2 = " SELECT firstName, lastName, profilephotoURL, gender, location, userID
                            FROM user
                            WHERE userID IN
                              (SELECT DISTINCT userID
                              FROM circle_participants AS c
                              WHERE c.circleID IN
                                (SELECT circleID
                                  FROM circle_participants
                                  WHERE userID = '$userIDEscaped'
                                 )

                               AND userID != '$userIDEscaped'

                               AND NOT EXISTS (
                                  SELECT *
                                  FROM friendship AS f
                                  WHERE f.userID1 = '$userIDEscaped'
                                  AND f.userID2 = c.userID
                                )
                               )
                  ";

/*RECS BY LOCATION WORKING */

$recommendQuery3 = " SELECT * FROM `user` as u WHERE u.userID IN
                      				(SELECT DISTINCT userID
                                       FROM user AS u2
                                       WHERE u2.location IN
                                           (SELECT location
                                            FROM user
                                            WHERE userID = '$userIDEscaped'
                                                       )
                                             AND u.userID != '$userIDEscaped'
                                             AND NOT EXISTS (
                                                              SELECT *
                                                              FROM friendship AS f
                                                              WHERE f.userID1 = '$userIDEscaped'
                                                              AND f.userID2 = u2.userID
                                                            )
                                                          )
                  ";



                  $recommendedResult1 = mysqli_query($conn, $recommendQuery1);
                  $recommendedResult2 = mysqli_query($conn, $recommendQuery2);
                  $recommendedResult3 = mysqli_query($conn, $recommendQuery3);
